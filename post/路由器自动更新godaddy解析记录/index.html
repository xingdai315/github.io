<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="utf-8">
  <meta name="generator" content="Hugo 0.64.1" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Ryan.Day">
  <meta property="og:url" content="https://ddmmyy.cc/post/%E8%B7%AF%E7%94%B1%E5%99%A8%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0godaddy%E8%A7%A3%E6%9E%90%E8%AE%B0%E5%BD%95/">

  <title>è·¯ç”±å™¨è‡ªåŠ¨æ›´æ–°godaddyè§£æè®°å½• - ğŸˆšï¸ä»– ï¼Œå”¯ğŸ¤šç†Ÿå°”</title>
  <meta property="og:title" content="è·¯ç”±å™¨è‡ªåŠ¨æ›´æ–°godaddyè§£æè®°å½• - ğŸˆšï¸ä»– ï¼Œå”¯ğŸ¤šç†Ÿå°”">
  <meta property="og:type" content="article">
  <meta name="description" content="">

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Arvo:400,700">
  <link rel="stylesheet" href="/css/highlight.css">
  <link rel="stylesheet" href="/css/journal.css">
  <link rel="shortcut icon" type="image/x-icon" href="/images/ohmysite.ico" />
  <link href="/index.xml" rel="alternate" type="application/rss+xml" title="ğŸˆšï¸ä»– ï¼Œå”¯ğŸ¤šç†Ÿå°”">

</head>

<body>
  <div class="container">

    <nav class="site-nav">
      <a href="https://ddmmyy.cc/">Index</a>
    </nav>


  <article class="post">
    <header class="post-header">
      <h1 class="post-title">è·¯ç”±å™¨è‡ªåŠ¨æ›´æ–°godaddyè§£æè®°å½•</h1>
      <time class="post-date" datetime="2020-02-05 11:32:03 CST">05 Feb 2020</time>
    </header>

    <blockquote>
<p>æœ€è¿‘åˆå¯ç”¨äº†è€çš„è·¯ç”±å™¨ï¼ŒåŸºäºopenwrtç³»ç»Ÿï¼Œæ²¡æœ‰å›ºä»¶å¯ç”¨rootåå‡‘åˆç”¨äº†</p>
</blockquote>
<p>æœ‰æ—¶å€™ä¼šæœ‰sshå›åˆ°å®¶é‡Œè·¯ç”±å™¨openwrtç³»ç»Ÿé‡Œæ“ä½œçš„éœ€æ±‚ï¼Œä»¥å‰ä¸€ç›´èµ°ipã€‚æœ€è¿‘ç”µä¿¡renewçš„æ¯”è¾ƒé¢‘ç¹å…¬ç½‘ipç»å¸¸å˜åŒ–æ‰€ä»¥è¿˜æ˜¯èµ°åŸŸåå§ã€‚</p>
<ul>
<li>ç¯å¢ƒæ˜¯openwrt 12ï¼Œç¡®å®šå‘½ä»¤æ­£å¸¸å³å¯ï¼›</li>
<li>pppoeé‡æ–°è·å–å…¬ç½‘ipåä¼šæ‰§è¡Œip-up.d ç›®å½•ä¸‹è„šæœ¬ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§è¿›è¡Œddnsè®°å½•æ›´æ–°ã€‚ç½‘ä¸Šæœ‰é€šè¿‡crontabå®šæ—¶åˆ·çš„æ–¹å¼æ¯”è¾ƒrubeï¼Œè€Œä¸”æœ‰çš„dnså¹³å°æœ‰apiè°ƒç”¨é™åˆ¶ï¼›</li>
<li>è„šæœ¬ä½ç½® /etc/ppp/ip-up.d/autoddns.sh</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e">#/bin/sh</span>
<span style="color:#75715e"># Openwrt system</span>
<span style="color:#75715e"># Positon /etc/ppp/ip-up.d</span>
<span style="color:#75715e"># Update godaddy&#39;s dns resolved record once global ip changed</span>
#
G_Key<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;your_key&#39;</span>
G_Secret<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;youer_sec&#39;</span>
Domain<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;example.com&#39;</span>
Name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;hostname&#39;</span>
Type<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;A&#39;</span>
IP<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>ifconfig |awk -F<span style="color:#e6db74">&#34;[: ]&#34;</span> <span style="color:#e6db74">&#39;/pppoe-wan/{getline;print $13}&#39;</span><span style="color:#66d9ef">)</span>
Upstatus<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -kLsXPUT -H<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Authorization: sso-key </span><span style="color:#e6db74">${</span>G_Key<span style="color:#e6db74">}</span><span style="color:#e6db74">:</span><span style="color:#e6db74">${</span>G_Secret<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> -H <span style="color:#e6db74">&#34;Content-type: application/json&#34;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>https://api.godaddy.com/v1/domains/<span style="color:#e6db74">${</span>Domain<span style="color:#e6db74">}</span>/records/<span style="color:#e6db74">${</span>Type<span style="color:#e6db74">}</span>/<span style="color:#e6db74">${</span>Name<span style="color:#e6db74">}</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>-d <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">[{\&#34;data\&#34;:\&#34;</span><span style="color:#e6db74">${</span>IP<span style="color:#e6db74">}</span><span style="color:#e6db74">\&#34;,\&#34;ttl\&#34;:600}]</span><span style="color:#e6db74">&#34;</span> 2&gt;/dev/null<span style="color:#66d9ef">)</span>
exit <span style="color:#ae81ff">0</span>
</code></pre></div><p>é‡å¯ä¸‹ç½‘ç»œçœ‹çœ‹æ–°çš„IPè§£ææ˜¯å¦æ›´æ–°åˆ°äº†goddayè§£æï¼Œç©ºé—´æœ‰é™å°±ä¸è®°å½•è¿è¡Œæ—¥å¿—äº†ã€‚</p>
<p>enjoy</p>


  </article>


      <footer class="site-footer">
        <span itemscope itemtype="http://schema.org/Person">
          <link itemprop="url" href="https://ddmmyy.cc/">
          <span itemprop="name">Ryan.Day</span>

          <br>
	
		  
          

          

          
        </span>

        
      </footer>
    </div>

  <script src="/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  </body>
</html>

